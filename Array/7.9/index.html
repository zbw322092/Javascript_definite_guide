<!-- ECMAScript 5中的数组方法 -->
<!DOCTYPE html>
<html>

<body>
  <script>
  // forEach()
  var data = [1, 2, 3, 4, 5],
    sum = 0;
  data.forEach(function(value) {
    sum += value;
  });
  console.log(data);
  console.log(sum);

  data.forEach(function(v, i, a) {
    a[i] = v + 1;
  });
  console.log(data);



  // map()
  var a = [1, 2, 3];
  console.log(a.map(function(x) {
    return x * x
  }));
  console.log(a);

  var aa = [1, , 3, , , 6];
  console.log(aa.map(function(x) {
    return x * x
  })); // [1, 2: 9, 5: 36]

  var aaa = [1, [2, 3]];
  console.log(aaa.map(function(x) {
    return x * x
  })); // [1,NaN]


  // filter
  var b = [1, 2, 3, 4, 5];
  console.log(b.filter(function(x) {
    return x < 3;
  }));

  console.log(b.filter(function(x, i) {
    return i % 2 == 0;
  }));

  console.log(b.filter(function(i) {
    return i % 2 == 0;
  })); // [2,4]


  var bb = [1, 2, , 4, , 6];
  console.log(bb);

  var bbb = bb.filter(function(x) {
    return x;
  }); // 将稀疏数组转化为稠密数组
  console.log(bbb);


  // every() & some()
  var c = [1, 2, 3, 4, 5];
  console.log(c.every(function(x) {
    return x < 100;
  }));

  console.log(c.every(function(x) {
    return x % 2 === 0;
  }));

  console.log(c.some(function(x) {
    return x < 2;
  }));

  console.log(c.some(isNaN));

  var cc = [];
  console.log(cc.every(function(x) {
    return x < 10;
  })); // true

  console.log(cc.some(function(x) {
    return x < 2;
  })); // false


  // reduce() & reduceRight()
  var d = [1, 2, 3, 4, 5];
  console.log(d.reduce(function(x, y) {
    return x + y;
  }, 0));

  console.log(d.reduce(function(x, y) {
    return x + y;
  })); // also 15; without initial number, the first and the seconde will be treated as the first two elemnts in the function

  console.log(d.reduce(function(x, y) {
    return x * y;
  }, 1));

  console.log(d.reduce(function(x, y) {
    return (x > y) ? x : y;
  }));

  var dd = [];
  // Uncaught TypeError: Reduce of empty array with no initial value
  // console.log(dd.reduce(function(x, y) {
  //     return x+y;
  // }));

  // console.log(d.reduceRight(function(accumulateor, value) {
  //     return Math.pow(value, accumulateor);
  // }));



  // indexOf() & lastIndexOf()
  var e = [1, 3, 0, 2, 1, 0];
  console.log(e.indexOf(1));
  console.log(e.lastIndexOf(1));
  console.log(e.indexOf(99));

  console.log(e.indexOf(1, 3)); // 4

  // find all elements in array
  function findAll(a, x) {
    var results = [],
      len = a.length,
      pos = 0;

    while (pos < len) {
      pos = a.indexOf(x, pos);
      if (pos === -1) break;
      results.push(pos);
      pos = pos + 1;
    }
    return results;
  }
  console.log(findAll(e, 1));


  
  </script>
</body>

</html>