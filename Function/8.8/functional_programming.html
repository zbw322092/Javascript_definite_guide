<!-- 函数式编程 -->
<!DOCTYPE html>
<html>

<body>
  <script>

    // 使用函数处理数组
    // reduce()的用法
    var numbers = [21,23,35,1];

    function addNumbers(total, cur) {
      return total += cur;
    }

    console.log(numbers.reduce(addNumbers));
    console.log(numbers); // 不改变原来的array

    // map()的用法
    console.log(numbers.map(Math.sqrt));
    console.log(numbers); // 不改变原来的array



    // 高阶函数
    function not(f) {
      return function() {
        var result = f.apply(this, arguments);
        console.log(this);
        return !result;
      };
    }

    var even = function(x) {
      return x%2 === 0;
    };
    var odd = not(even);

    console.log([1,1,3,5,5].every(odd)); // true


    // 高阶函数应用的另外一个例子
    function compose(f,g) {
      return function() {
        return f.call(this, g.apply(this, arguments));
      };
    }

    var square = function(x) {
      return x*x;
    };
    var sum = function(x,y) {
      return x+y;
    };
    var squareofsum = compose(square, sum);

    console.log(squareofsum);
    console.log(squareofsum(2,3));


    // review call and apply again
    var o = {
      a: 1,
      b: 2
    },
    p = {
      c: 3,
      d: 4
    };

    console.log(square.call(o, o.b)); // 4
    console.log(square.call(this, o.b)); // 4
    console.log(square.call(p, o.b)); // 4
    console.log(square.call(o.b)); // NaN
    console.log(p);

    // Uncaught TypeError: CreateListFromArrayLike called on non-object
    // console.log(sum.apply(this, o.b));
    
    console.log(sum.apply(this, [1,2])); // 3
    console.log(sum.apply(this, [1,2,3,4])); // 3

    console.log(sum.apply(null ,[1,2])); // 3



    

  </script>
</body>

</html>





































